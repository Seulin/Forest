map = [[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1],
       [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
       [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1],
       [1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1],
       [1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
       [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]]
m1=[ [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
          [ 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1 ],
          [ 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1 ],
          [ 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1 ],
          [ 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
          [ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
          [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 ] ]
m2= [[ 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
          [ 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1 ],
          [ 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1 ],
          [ 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1 ],
          [ 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1 ],
          [ 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1 ],
          [ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0 ],
          [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 ] ]
m3=[ [ 0, 1, 1, 1, 1, 1],
          [ 0, 0, 0, 0, 0, 1 ],
          [ 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 0, 0, 0, 1 ],
          [ 1, 1, 1, 1, 0, 0 ],]

m4=[ [ 0, 1, 1, 1, 1, 1],
          [ 0, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 1, 1, 1 ],
          [ 1, 0, 0, 0, 0, 1 ],
          [ 1, 0, 1, 1, 0, 1 ],
          [ 1, 1, 1, 1, 0, 0 ],]

class Player:
    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y

    def move(self, dir):
        if dir == 'up':
            self.y += 1
        elif dir == 'down':
            self.y -= 1
        elif dir == 'left':
            self.x -= 1
        elif dir == 'right':
            self.x += 1
        pass

    def get_position(self):
        return (self.x, self.y)


class MazeGame:
    def __init__(self, map=None):
        self.map = map
        self.player = Player()
        self.path = []

    def play(self):
        self.path.append(self.player.get_position())
        visited_place = set()
        stack = []

        visited_place.add(self.player.get_position())
        stack.append(self.player.get_position())

        dx = [1,0,0,-1]
        dy = [0,-1,1,0]
        map_size = len(self.map)

        while True:
            a,b = self.player.get_position()
            if (a,b) == (map_size-1, map_size-1):
                break

            check = 0
            for i in range(4):
                ax = a + dx[i]
                by = b + dy[i]
                if ax >= 0 and ax < map_size and by >= 0 and by < map_size:
                    if self.map[by][ax] == 0:
                        if (ax, by) not in visited_place:
                            if i == 0:
                                self.player.move('right')
                                break
                            elif i == 1:
                                self.player.move('down')
                                break
                            elif i == 2:
                                self.player.move('up')
                                break
                            elif i == 3:
                                self.player.move('left')
                                break
                        else:
                            check += 1
                    else:
                        check += 1
                else:
                    check += 1


            # 더 이상 갈 곳이 없는 경우
            if check == 4:
                p,q = stack.pop(-1)
                self.player = Player(p,q)
                self.path.append(self.player.get_position())
            else:
                self.path.append(self.player.get_position())
                visited_place.add(self.player.get_position())
                stack.append(self.player.get_position())


    def get_map(self):
        return self.map

    def get_path(self):
        return self.path


if __name__ == "__main__":
    game1 = MazeGame(map)
    game1.play()
    print(game1.get_map())
    print(game1.get_path())
