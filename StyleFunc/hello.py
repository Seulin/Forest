map = [[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1],
       [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
       [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1],
       [1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
       [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1],
       [1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1],
       [1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
       [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]]
m1 = [[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]]
m2 = [[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1],
      [1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1],
      [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1],
      [1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]]
m3 = [[0, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 1],
      [1, 0, 0, 0, 0, 1],
      [1, 1, 1, 1, 0, 0], ]

m4 = [[0, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 0, 1],
      [1, 0, 1, 1, 1, 1],
      [1, 0, 0, 0, 0, 1],
      [1, 0, 1, 1, 0, 1],
      [1, 1, 1, 1, 0, 0], ]


class Player:
    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y

    def move(self, dir):
        if dir == 'up':
            self.y -= 1
        elif dir == 'down':
            self.y += 1
        elif dir == 'left':
            self.x -= 1
        elif dir == 'right':
            self.x += 1
        pass

    def get_position(self):
        return (self.x, self.y)


class MazeGame:
    def __init__(self, map=None):
        self.map = map
        self.player = Player()
        self.path = []
        self.map_x = len(map[0]) - 1
        self.map_y = len(map) - 1
        self.end = False

    def play(self):
        if (self.map_x, self.map_y) == self.player.get_position():
            self.path.append(self.player.get_position())
            self.end = True
            return
        if self.end:
            return

        #print(self.player.get_position())
        self.path.append(self.player.get_position())
        x = self.player.x
        y = self.player.y
        self.map[y][x] = '*'

        if x != 0 and self.map[y][x - 1] == 0:  # left
            self.player.move('left')
            #print('left')
            self.play()
            if not self.end:
                #print('fail!')
                i = self.path.index((x, y))
                del self.path[i + 1:]
                self.player.x, self.player.y = x, y

        if x != self.map_x and self.map[y][x + 1] == 0:  # right
            self.player.move('right')
            #print('right')
            self.play()
            if not self.end:
                #print('fail!')
                i = self.path.index((x, y))
                del self.path[i + 1:]
                self.player.x, self.player.y = x, y

        if y != 0 and self.map[y - 1][x] == 0:  # up
            self.player.move('up')
            #print('up')
            self.play()
            if not self.end:
                #print('fail!')
                i = self.path.index((x, y))
                del self.path[i + 1:]
                self.player.x, self.player.y = x, y

        if y != self.map_y and self.map[y + 1][x] == 0:  # down
            self.player.move('down')
            #print('down')
            self.play()
            if not self.end:
                #print('fail!')
                i = self.path.index((x, y))
                del self.path[i + 1:]
                self.player.x, self.player.y = x, y

    def get_map(self):
        return self.map

    def get_path(self):
        return self.path


if __name__ == "__main__":
    game1 = MazeGame(map)
    game1.play()
    print(game1.get_map())
    print(game1.get_path())